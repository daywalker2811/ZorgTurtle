function hasEnoughtFuel()
  return turtle.getFuelLevel() > 0  
end

-- go forward if the turtle has enought fuel
function step()
  if hasEnoughtFuel() then
    turtle.forward()
  else
    position = searchFuelInInventory()
    turtle.refuel(position)
  end
end

-- look into turtle's inventory if it contains fuel
function searchFuelInInventory()
  for i = 1, 16 do
    turtel.select(i)
    if turtel.refuel(0) then
      return i
    end
  end
end

-- main
for i = 1, 21 do
  if turtle.detect() then
    turtle.dig()
    step()
  end
end

turtle.turnRight()

for i = 1, 21 do
  -- todo tbd
end

